{"ast":null,"code":"var _jsxFileName = \"/home/alex/Documents/usp/graduacao/terceiroSemestre/POO/Projeto/Client/charity-donation/src/pages/Charity.js\";\nimport React, { Component } from 'react';\nimport Needs from './components/Needs';\nimport Connection from '../connection/Connection';\nimport ResponseType from '../connection/ResponseType';\n\nclass Charity extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      content: {}\n    };\n    this.query = this.query.bind(this);\n    this.setContent = this.setContent.bind(this);\n  }\n\n  query() {\n    const msg = {\n      id: this.props.match.params.id,\n      type: ResponseType.CHARITY\n    };\n    if (this.socket.readyState === this.socket.OPEN) this.socket.send(JSON.stringify(msg));else setTimeout(this.query, 10);\n  }\n\n  setContent(content) {\n    this.setState({\n      error: false,\n      loading: false,\n      content: JSON.parse(content)\n    });\n  }\n\n  setupSocket() {\n    this.socket = Connection;\n\n    this.socket.onmessage = r => {\n      const response = JSON.parse(r.data);\n\n      switch (response.type) {\n        case ResponseType.CHARITY:\n          this.setContent(response.message);\n          break;\n\n        default:\n          this.setState({\n            error: true\n          });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.setupSocket();\n    this.query();\n  }\n\n  render() {\n    console.log(this.state);\n    return this.error ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"error\") : this.loading ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"loading...\") : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Nome ch.\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Area de atuacao\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque aliquam arcu non leo vulputate ullamcorper. Ut euismod porttitor velit id porta. Vestibulum dictum nisl id felis tincidunt, in lobortis nibh varius. In in cursus diam. Donec metus metus, euismod vel enim nec, pulvinar dictum mi. Mauris rutrum sagittis nunc at semper. Proin a neque placerat, elementum nulla id, finibus dui. Phasellus placerat eros nisi, nec dapibus dolor iaculis sit amet. Pellentesque finibus quam a interdum maximus.\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Lista de nec.\"), React.createElement(Needs, {\n      data: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Charity;","map":{"version":3,"sources":["/home/alex/Documents/usp/graduacao/terceiroSemestre/POO/Projeto/Client/charity-donation/src/pages/Charity.js"],"names":["React","Component","Needs","Connection","ResponseType","Charity","constructor","props","state","loading","content","query","bind","setContent","msg","id","match","params","type","CHARITY","socket","readyState","OPEN","send","JSON","stringify","setTimeout","setState","error","parse","setupSocket","onmessage","r","response","data","message","componentDidMount","render","console","log"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;;AAEA,MAAMC,OAAN,SAAsBJ,SAAtB,CAAgC;AAC5BK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,OAAO,EAAE,IADA;AAETC,MAAAA,OAAO,EAAE;AAFA,KAAb;AAKA,SAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACH;;AAEDD,EAAAA,KAAK,GAAG;AACJ,UAAMG,GAAG,GAAG;AACRC,MAAAA,EAAE,EAAE,KAAKR,KAAL,CAAWS,KAAX,CAAiBC,MAAjB,CAAwBF,EADpB;AAERG,MAAAA,IAAI,EAAEd,YAAY,CAACe;AAFX,KAAZ;AAKA,QAAI,KAAKC,MAAL,CAAYC,UAAZ,KAA2B,KAAKD,MAAL,CAAYE,IAA3C,EACI,KAAKF,MAAL,CAAYG,IAAZ,CAAiBC,IAAI,CAACC,SAAL,CAAeX,GAAf,CAAjB,EADJ,KAEKY,UAAU,CAAC,KAAKf,KAAN,EAAa,EAAb,CAAV;AACR;;AAEDE,EAAAA,UAAU,CAACH,OAAD,EAAU;AAChB,SAAKiB,QAAL,CAAc;AACVC,MAAAA,KAAK,EAAE,KADG;AAEVnB,MAAAA,OAAO,EAAE,KAFC;AAGVC,MAAAA,OAAO,EAAEc,IAAI,CAACK,KAAL,CAAWnB,OAAX;AAHC,KAAd;AAKH;;AAEDoB,EAAAA,WAAW,GAAG;AACV,SAAKV,MAAL,GAAcjB,UAAd;;AAEA,SAAKiB,MAAL,CAAYW,SAAZ,GAAyBC,CAAD,IAAO;AAC3B,YAAMC,QAAQ,GAAGT,IAAI,CAACK,KAAL,CAAWG,CAAC,CAACE,IAAb,CAAjB;;AACA,cAAQD,QAAQ,CAACf,IAAjB;AACI,aAAKd,YAAY,CAACe,OAAlB;AACI,eAAKN,UAAL,CAAgBoB,QAAQ,CAACE,OAAzB;AACA;;AACJ;AACI,eAAKR,QAAL,CAAc;AACVC,YAAAA,KAAK,EAAE;AADG,WAAd;AALR;AASH,KAXD;AAYH;;AAEDQ,EAAAA,iBAAiB,GAAG;AAChB,SAAKN,WAAL;AACA,SAAKnB,KAAL;AACH;;AAED0B,EAAAA,MAAM,GAAG;AACLC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK/B,KAAjB;AAEA,WACI,KAAKoB,KAAL,GACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADA,GAEA,KAAKnB,OAAL,GACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,GAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+fAHJ,EAcI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAdJ,EAeI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,EAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfJ,CALJ;AAuBH;;AAhF2B;;AAmFhC,eAAeJ,OAAf","sourcesContent":["import React, {Component} from 'react'\nimport Needs from './components/Needs'\nimport Connection from '../connection/Connection'\nimport ResponseType from '../connection/ResponseType'\n\nclass Charity extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            loading: true,\n            content: {}\n        }\n\n        this.query = this.query.bind(this)\n        this.setContent = this.setContent.bind(this)\n    }\n\n    query() {\n        const msg = {\n            id: this.props.match.params.id,\n            type: ResponseType.CHARITY\n        }\n\n        if (this.socket.readyState === this.socket.OPEN)\n            this.socket.send(JSON.stringify(msg))\n        else setTimeout(this.query, 10)\n    }\n\n    setContent(content) {\n        this.setState({\n            error: false,\n            loading: false,\n            content: JSON.parse(content)\n        })\n    }\n\n    setupSocket() {\n        this.socket = Connection\n\n        this.socket.onmessage = (r) => {\n            const response = JSON.parse(r.data)\n            switch (response.type) {\n                case ResponseType.CHARITY:\n                    this.setContent(response.message)\n                    break\n                default:\n                    this.setState({\n                        error: true\n                    })\n            }\n        }        \n    }\n\n    componentDidMount() {\n        this.setupSocket()\n        this.query()\n    }\n\n    render() {\n        console.log(this.state)\n\n        return (\n            this.error ?\n            <p>error</p> :\n            this.loading ?\n            <p>loading...</p> :\n            <div>\n                <h1>Nome ch.</h1>\n                <h2>Area de atuacao</h2>\n                <p>\n                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. \n                    Quisque aliquam arcu non leo vulputate ullamcorper. \n                    Ut euismod porttitor velit id porta. Vestibulum dictum \n                    nisl id felis tincidunt, in lobortis nibh varius. In in \n                    cursus diam. Donec metus metus, euismod vel enim nec, pulvinar dictum mi. \n                    Mauris rutrum sagittis nunc at semper. Proin a neque placerat, elementum \n                    nulla id, finibus dui. Phasellus placerat eros nisi, nec dapibus dolor \n                    iaculis sit amet. Pellentesque finibus quam a interdum maximus. \n                </p>\n                \n                <h2>Lista de nec.</h2>\n                <Needs data=\"\"/>\n            </div>\n        )\n    }\n}\n\nexport default Charity"]},"metadata":{},"sourceType":"module"}